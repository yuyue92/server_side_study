## 一、业务逻辑（后端 + 表）

1) 核心关系
- Project（项目） 与 Task（任务）：一对多
- 一个项目下可以挂很多任务；删除项目时，会级联删除其下所有任务（SQLite 外键 ON DELETE CASCADE 已启用）。

2) API 概览（供前端调用，已启用 CORS）
- 健康检查：GET /health
- Projects
  - GET /projects（筛选/分页/排序）
  - POST /projects（创建）
  - GET /projects/{id}（详情）
  - PUT /projects/{id}（更新）
  - PATCH /projects/{id}/status（仅改状态）
  - DELETE /projects/{id}（删除，级联删任务）
  - GET /projects/{id}/tasks（该项目下任务列表）
  - POST /projects/{id}/tasks（在该项目下直接创建任务）
- Tasks
   - GET /tasks（筛选/分页/排序）
   - POST /tasks（创建）
   - GET /tasks/{id}（详情）
   - PUT /tasks/{id}（更新）
   - PATCH /tasks/{id}/status（仅改状态）
   - DELETE /tasks/{id}（删除）

## 二、前端操作使用指南（HTML+CSS+JS 单页）

1) 顶部导航
- Tabs：项目 和 任务 两个页签自由切换。
- API 地址：右上角可改后端地址（持久化存到 localStorage）。
- 一键示例数据：自动创建 2 个项目与若干任务，便于快速体验。
- API 速览：按钮会弹出接口清单（只读）。

2) 项目页（Projects）
- (a) 列表与筛选
  - 搜索：按 项目名称 模糊匹配。
  - 筛选项：状态、负责人 ID、客户 ID。
  - 排序：创建时间、截止时间、名称等（升/降序）。
  - 分页：右上“每页条数”，底部 上一页/下一页。
  - 刷新：重新载入当前筛选条件下的数据。
- (b) 新建项目
  - 点击 “新建项目” → 打开表单弹窗。
  - 必填：项目名称、状态。
  - 可选：描述、负责人/客户 ID、预算、开始/截止日期。
  - 点 “保存”。保存成功后列表自动刷新。
  - 表单字段说明
  - 预算、ID、工时为数字；留空会按 null 传到后端。
  - 日期用浏览器原生日期选择器，保存为 YYYY-MM-DD。
- (c) 编辑项目
  - 列表行内点 “编辑”，弹窗会自动带入数据；修改后点“保存”。
- (d) 快速改状态
  - 列表行内 状态下拉 直接切换（即时生效，绿色提示）。
- (e) 查看项目下任务
  - 列表行内 “查看任务” → 自动跳到“任务”页并把“项目ID”筛选设为该项目。
- (f) 删除项目（注意级联）
  - 列表行内 “删除” → 弹出确认。
  - 确认后删除该项目，并级联删除所有所属任务。
  - 底部有“x–y / ≥z”的范围提示：当前页显示范围与大致总量（前端基于返回条数估算）。

3) 任务页（Tasks）
- (a) 列表与筛选
  - 支持按以下条件筛选：
  - 项目ID（为空=全部项目）
  - 任务名（搜索框）
  - 状态：todo/doing/done/blocked
  - 优先级：low/medium/high/urgent
  - 执行人ID
  - 到期日范围：到期 >= / 到期 <=
  - 排序：创建时间、到期日、名称等（升/降序）。
  - 分页与刷新与项目页一致。
- (b) 新建任务
- 点击 “新建任务” → 打开任务表单。
- 必填：项目ID、任务名、状态。
- 可选：描述、执行人、优先级、预估/实际工时、到期日。
- 点 “保存”；成功后自动刷新列表。
- 提示：如果你是从项目页点“查看任务”跳过来的，项目ID筛选已带上；
- 你也可以在新建任务表单里手动填入 sqlproject_id。
- (c) 编辑任务
  - 列表行内点 “编辑”，表单带入原值；修改后保存。
- (d) 快速改状态
  - 列表行内 状态下拉 直接切换（即时生效）。
- (e) 删除任务
  - 列表行内 “删除” → 确认后删除该任务。
